<p><%= @group_name %>の月次プラン</p>
<% if @plan.present? %>
<p><%= @plan.year %>年<%= @plan.month %>月の</p>
<% end %>
<p>目標金額</p>
<% if @plan.present? %>
<b><p id='money_amount'><%= @plan.money_amount %></p></b>
<% end %>
<p>利用履歴</p>
<table border='1' class="table">
    <thead class="thead-dark">
        <tr>
            <th>使った日</th>
            <th>使った金額</th>
            <th>用途</th>
            <th>使った人</th>
        </tr>
    </thead>
    <tbody>
    <% @usages.each do |usage| %>
        <tr>
            <td><%= usage.date %></td>
            <td><%= usage.spending_money %></td>
            <td><%= usage.purpose %></td>
            <td><%= usage.user.name %></td>
        </tr>
    <% end %>
    </tbody>
</table>
<hr>
<p>利用金額を入力する</p>
<%= form_with(model: @usage, local: true, id: "usage", url: create_usage_path) do |f| %>
    <%= f.hidden_field :plan_id, :value => @plan.id %>
    <%= f.hidden_field :user_id, :value => current_user.id %>
    <div>
        
    </div>
<div>
    <%= f.label :date, "使った日" %>
    <%= f.date_field :date, id: "date" %>
</div>
<div>
    <%= f.label :spending_money, "使った金額" %>
    <%= f.text_field :spending_money, id: "spending_money" %>
    <% if @usage.errors.include?(:spending_money) %>
         <p style="color: red;"><%= @usage.errors.full_messages_for(:spending_money).first %>
　       <% end %>
</div>
<div>
    <%= f.label :purpose, "用途" %>
    <% if @usage.errors.include?(:purpose) %>
         <p style="color: red;"><%= @usage.errors.full_messages_for(:purpose).first %>
　       <% end %>
</div>
<label>
    <%= f.radio_button :purpose, @plan.choice1, { style: "width: 40px" } %>
    <%= f.label :choice1, @plan.choice1, { style: "display: inline-block;" } %>
</label>
<div>
    <%= f.radio_button :purpose, @plan.choice2, { style: "width: 40px" } %>
    <%= f.label :choice2, @plan.choice2, { style: "display: inline-block;" } %>
</div>
<div>
    <%= f.radio_button :purpose, @plan.choice3, { style: "width: 40px" } %>
    <%= f.label :choice3, @plan.choice3, { style: "display: inline-block;" } %>
</div>
<div>
    <%= f.radio_button :purpose, :other, { id:"purpose_other" ,style: "width: 40px"} %>
    <%= f.label :other, "その他", { style: "display: inline-block;" } %>
    <%= f.text_field :purpose_text, id: "purpose_text",class:"purpose_text" %>
</div>
<%= f.submit "利用金額登録", data: { confirm: "登録してよろしいですか？" } %>
<% end %>

<%= link_to("ユーザー詳細画面にもどる", "/users/#{current_user.id}") %>